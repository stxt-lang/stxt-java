STRUCT ParseState:
    // Pila de nodos según la jerarquía actual del documento.
    stack: STACK<Node>

    // Lista de nodos raíz (documentos completos).
    documents: LIST<Node>


FUNCTION createParseState() -> ParseState:
    state = new ParseState
    state.stack = pila vacía
    state.documents = lista vacía
    RETURN state


// --- Operaciones sobre la pila ---

FUNCTION stackIsEmpty(state: ParseState) -> BOOLEAN:
    RETURN estado.stack está vacía

FUNCTION stackPeek(state: ParseState) -> Node:
    RETURN tope de state.stack

FUNCTION stackPush(state: ParseState, node: Node):
    insertar node en la cima de state.stack

FUNCTION stackPop(state: ParseState) -> Node:
    sacar y devolver el nodo en la cima de state.stack


// --- Operaciones sobre documentos raíz ---

FUNCTION addDocument(state: ParseState, doc: Node):
    añadir doc al final de state.documents
